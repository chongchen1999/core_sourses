# 寄存器 (AT&T 风格)

## x86-64 常见寄存器一览表 (AT&T 语法)

| 类别         | 寄存器名称       | 位数 | 主要用途 |
|------------------|---------------------|---------|-------------|
| 通用寄存器   | `%rax` / `%eax` / `%ax` / `%ah`/`%al` | 64/32/16/8 | 累加器，函数返回值 |
|                 | `%rbx` / `%ebx` / `%bx` / `%bh`/`%bl` | 64/32/16/8 | 基址寄存器（保留调用） |
|                 | `%rcx` / `%ecx` / `%cx` / `%ch`/`%cl` | 64/32/16/8 | 计数器（循环计数） |
|                 | `%rdx` / `%edx` / `%dx` / `%dh`/`%dl` | 64/32/16/8 | 数据寄存器（I/O、扩展运算） |
|                 | `%rsi` / `%esi` / `%si` | 64/32/16 | 源索引（字符串/内存操作） |
|                 | `%rdi` / `%edi` / `%di` | 64/32/16 | 目标索引（字符串/内存操作） |
|                 | `%rbp` / `%ebp` / `%bp` | 64/32/16 | 栈帧基址（可选） |
|                 | `%rsp` / `%esp` / `%sp` | 64/32/16 | 栈指针（必须保存） |
|                 | `%r8`–`%r15` / `%r8d`–`%r15d` / `%r8w`–`%r15w` / `%r8b`–`%r15b` | 64/32/16/8 | 新增通用寄存器（参数传递/临时存储） |
| 指令指针     | `%rip` / `%eip` | 64/32 | 指向下一条指令地址 |
| 标志寄存器   | `%rflags` / `%eflags` | 64/32 | 存储CPU状态（如`%zf`、`%cf`、`%sf`等） |
| 段寄存器     | `%cs`, `%ds`, `%ss`, `%es`, `%fs`, `%gs` | 16 | 内存分段（64位模式下`%fs`/`%gs`仍有用） |
| 浮点寄存器   | `%st(0)`–`%st(7)` | 80 | x87浮点运算 |
| 向量寄存器   | `%xmm0`–`%xmm15` | 128 | SSE浮点/SIMD运算 |
|                 | `%ymm0`–`%ymm15` | 256 | AVX扩展 |
|                 | `%zmm0`–`%zmm31` | 512 | AVX-512扩展 |
| 控制寄存器   | `%cr0`–`%cr8` | 64 | 系统控制（如分页、保护模式） |
| 调试寄存器   | `%dr0`–`%dr7` | 64 | 硬件断点调试 |

---

## 调用约定中的寄存器用途（System V AMD64 ABI）
| 用途         | 寄存器 |
|------------------|-----------|
| 整数参数传递 | `%rdi`, `%rsi`, `%rdx`, `%rcx`, `%r8`, `%r9` |
| 浮点参数传递 | `%xmm0`–`%xmm7` |
| 返回值       | `%rax`（整数）、`%xmm0`（浮点） |
| 被调用者保存 | `%rbx`, `%rbp`, `%r12`–`%r15` |
| 调用者保存   | `%rax`, `%rcx`, `%rdx`, `%rsi`, `%rdi`, `%r8`–`%r11`, `%xmm0`–`%xmm15` |

---

说明
1. 通用寄存器：支持不同位宽操作（如`%rax`是64位，`%eax`是低32位，`%ax`是低16位，`%al`是低8位）。  
2. 向量寄存器：`%xmm`用于SSE/浮点，`%ymm`/`%zmm`用于AVX扩展。  
3. 调用约定：不同操作系统（如Linux vs Windows）可能使用不同寄存器传递参数。
4. AT&T语法特点：
   • 寄存器名前加`%`符号

   • 使用`%st(n)`表示x87浮点寄存器栈

   • 标志位通常写作`%eflags`而不是单独标志名